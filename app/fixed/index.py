from flask import Flask, render_template, request
import string

app = Flask(__name__)
app.config.from_object(__name__)


whitelist_set = set(string.digits + '.' + '/' + '*' + '+' + '-' + '%' + '(' + ')')


@app.route('/')
def welcome():
    return render_template('form.html')


@app.route('/result', methods=['POST'])
def result():

    operation = request.form.get("operation", type=str)

    if (is_valid(operation)):
        entry = eval(operation)
    else:
        entry = "Syntax_Error"

    return render_template('result.html', entry=entry)


def is_valid(test_str):
    return set(test_str) <= whitelist_set


app.run(host='0.0.0.0', port=5050)
